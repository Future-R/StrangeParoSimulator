import { GameEvent } from '../types';

// ===========================
// 事件配置 (Events)
// ===========================
// UPDATE NOTICE: 
// 1. 爱欲 (Libido) Logic: Teasing/Wanting = +Libido; Sex/Satisfaction = -Libido (Release).
// 2. Added specific Female Trainer events (Yuri/Ambiguous).

export const EVENTS: GameEvent[] = [
  // ===========================
  // 女训练员专属：暧昧/百合事件 (New & Refined)
  // ===========================
  {
    id: 'gl_hand_compare',
    权重: 50,
    可触发次数: -1,
    标签组: ['暧昧', '百合', '肢体接触'],
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 25',
    标题: '指尖的温度',
    正文: '“{训练员.姐姐大人}...你的手好小啊。” 休息时，{当前角色.名称} 突然抓起你的手，将掌心贴在一起比对大小。不知不觉间，她的手指滑入你的指缝，变成了十指相扣的状态。“嘿嘿...这样就抓住了。”',
    选项组: [
      { 显示文本: '回握她的手', 操作指令: '属性变更 爱欲 10; 关系变更 爱情 5; 属性变更 心情 5' },
      { 显示文本: '害羞地抽回', 操作指令: '属性变更 魅力 2; 关系变更 友情 2' }
    ]
  },
  {
    id: 'gl_bra_strap',
    权重: 40,
    可触发次数: -1,
    标签组: ['暧昧', '更衣室'],
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.友情 > 40',
    标题: '更衣室的秘密',
    正文: '更衣室里，{当前角色.名称} 背对着你，声音有些窘迫：“{训练员.称呼}...那个...内衣的带子好像扭到了，能帮我弄一下吗？” 她撩起头发，露出了白皙的后颈和被勒出红印的背部肌肤。',
    选项组: [
      { 显示文本: '帮她整理', 操作指令: '属性变更 爱欲 15; 关系变更 爱情 3; 属性变更 毅力 5' },
      { 显示文本: '让她找别人', 操作指令: '属性变更 心情 -5; 属性变更 毅力 2' }
    ]
  },
  {
    id: 'gl_lap_sleep',
    权重: 35,
    可触发次数: -1,
    标签组: ['暧昧', '百合', '午睡'],
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 30',
    标题: '毫无防备',
    正文: '午休时间，你在沙发上打了个盹。醒来时发现 {当前角色.名称} 竟然钻进了你的毯子里，像只小猫一样蜷缩在你的怀里熟睡，脸颊紧贴着你的胸口，温热的呼吸喷洒在你的锁骨上。',
    选项组: [
      { 显示文本: '摸摸她的头', 操作指令: '属性变更 爱欲 5; 关系变更 爱情 5; 属性变更 心情 10' },
      { 显示文本: '继续装睡', 操作指令: '属性变更 爱欲 10; 属性变更 毅力 5' }
    ]
  },

  // ===========================
  // 暧昧缓冲事件 (Love 20~40)
  // ===========================
  {
    id: 'ambiguous_tie_fix',
    权重: 45,
    可触发次数: -1,
    标签组: ['暧昧', '日常'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 20',
    标题: '领带歪了',
    正文: '“真是的，{训练员.称呼}总是这么不修边幅。” {当前角色.名称} 停下脚步，自然地伸出手帮你整理衣领和领带。两人的距离近得能感受到彼此的呼吸，她垂下的发丝轻轻扫过你的脸颊。',
    选项组: [
      { 显示文本: '盯着她的眼睛', 操作指令: '属性变更 爱欲 5; 关系变更 爱情 3; 属性变更 心情 5' },
      { 显示文本: '有些害羞地移开视线', 操作指令: '属性变更 魅力 2; 关系变更 友情 2' }
    ]
  },
  {
    id: 'ambiguous_feeding',
    权重: 40,
    可触发次数: -1,
    标签组: ['暧昧', '饮食'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 25 && 随机(1~100) > 40',
    标题: '试吃一口',
    正文: '午休时，{当前角色.名称} 用勺子挖起一块甜点递到你嘴边。“这个超好吃的！{训练员.称呼}也尝尝看——啊——” 她眼神晶亮，充满了期待，完全没有意识到这是一个多么亲密的举动。',
    选项组: [
      { 显示文本: '张嘴吃下', 操作指令: '属性变更 体力 5; 属性变更 爱欲 5; 关系变更 爱情 5; 获得标签 肥胖' },
      { 显示文本: '礼貌拒绝', 操作指令: '属性变更 心情 -5; 属性变更 毅力 2' }
    ]
  },
  {
    id: 'ambiguous_lap_pillow',
    权重: 35,
    可触发次数: 1,
    标签组: ['暧昧', '接触'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 35',
    标题: '膝枕服务',
    正文: '看你在草地上累得睡着了，{当前角色.名称} 悄悄地把你的头移到了她的腿上。当你醒来时，映入眼帘的是她温柔的笑脸和柔软的大腿触感。“醒了吗？{训练员.称呼}...即使再睡一会儿也可以哦。”',
    选项组: [
      { 显示文本: '再睡五分钟', 操作指令: '属性变更 体力 20; 属性变更 心情 10; 关系变更 爱情 10; 属性变更 爱欲 5' },
      { 显示文本: '惊慌起身', 操作指令: '属性变更 精力 5; 属性变更 心情 -5' }
    ]
  },
  {
    id: 'ambiguous_close_whisper',
    权重: 40,
    可触发次数: -1,
    标签组: ['暧昧', '接触'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 30',
    标题: '耳边密语',
    正文: '为了避开周围嘈杂的人群，{当前角色.名称} 凑到你耳边说话。她的嘴唇若有若无地触碰着你的耳廓，温热的气息直钻耳孔，让你半边身子都酥麻了。她似乎是故意的？',
    选项组: [
      { 显示文本: '保持镇定', 操作指令: '属性变更 毅力 5; 属性变更 爱欲 5' },
      { 显示文本: '耳朵变红了', 操作指令: '属性变更 魅力 5; 关系变更 爱情 5' }
    ]
  },

  // ===========================
  // 女训练员专属 (百合/磨镜子/R18+)
  // ===========================
  {
    id: 'h_yuri_bath',
    权重: 35,
    可触发次数: -1,
    标签组: ['性', '百合', '浴室'],
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 60',
    标题: '浴室的私语',
    正文: '合宿期间，{当前角色.名称} 突然闯进了你正在使用的浴室。“{训练员.称呼}...一个人洗背很不方便吧？” 水雾缭绕中，她赤裸的身体紧贴着你的后背，柔软的触感让你心跳加速。她的手滑过你的腰际，“{训练员.称呼}的皮肤...好滑...”',
    选项组: [
      { 显示文本: '享受她的服务', 操作指令: '属性变更 爱欲 20; 属性变更 心情 10; 关系变更 爱情 5; 获得标签 好色; 跳转 h_yuri_bath_clean' },
      { 显示文本: '互相清洗', 操作指令: '属性变更 爱欲 40; 属性变更 精力 -20; 关系变更 爱情 15' }
    ]
  },
  // [链式事件] 浴室后续 (Release Event)
  {
    id: 'h_yuri_bath_clean',
    权重: 0, // 仅跳转触发
    可触发次数: -1,
    标签组: ['性', '百合'],
    触发条件: 'false', // 仅跳转
    标题: '泡沫下的秘密',
    正文: '你默许了她的行为。{当前角色.名称} 的手沾满了沐浴露，从你的腹部逐渐向下滑动。“{训练员.称呼}...这里也要洗干净才行呢...” 她的指尖在敏感地带打转，温热的吐息喷洒在你的耳廓上，“声音忍得这么辛苦...是被我弄舒服了吗？”',
    选项组: [
      { 显示文本: '转身吻住她', 操作指令: '属性变更 爱欲 -30; 属性变更 精力 -30; 关系变更 爱情 20; 属性变更 心情 20' },
      { 显示文本: '依靠在怀里', 操作指令: '属性变更 爱欲 20; 属性变更 心情 10' }
    ]
  },

  {
    id: 'h_yuri_scent',
    权重: 30,
    可触发次数: -1,
    标签组: ['性', '百合', '气味'],
    // 增加爱情 > 40
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.属性.爱欲 > 50 && 当前角色.关系.玩家.爱情 > 40',
    标题: '雌性的气味',
    正文: '{当前角色.名称} 把脸埋在你的颈窝里深深吸了一口气。“{训练员.称呼}身上...有股好闻的味道...和我不一样的味道。” 她的舌尖轻轻舔舐着你的耳垂，声音因为情欲而变得沙哑，“比起那些臭男人...我更喜欢{训练员.称呼}...”',
    选项组: [
      { 显示文本: '抱紧她', 操作指令: '属性变更 爱欲 25; 关系变更 爱情 10; 属性变更 心情 5' },
      { 显示文本: '因害羞而推开', 操作指令: '属性变更 毅力 5; 属性变更 爱欲 5' }
    ]
  },
  {
    id: 'h_yuri_soft_touch',
    权重: 30,
    可触发次数: -1,
    标签组: ['性', '百合', '身体检查'],
    // 增加爱情 > 30
    触发条件: '训练员.性别 == "女" && 当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 30',
    标题: '特殊的身体检查',
    正文: '“因为是同性，所以没关系的吧？” {当前角色.名称} 这样说着，在这个狭小的医务室里解开了衣服。但她的手却不安分地伸向了你的胸口，指尖隔着衬衫挑逗着。“{训练员.称呼}的心跳...好快...是因为兴奋了吗？”',
    选项组: [
      { 显示文本: '默许她的行为', 操作指令: '属性变更 爱欲 30; 属性变更 精力 -10; 关系变更 爱情 10' },
      { 显示文本: '制止她', 操作指令: '属性变更 毅力 10; 属性变更 心情 -5' }
    ]
  },

  // ===========================
  // 深度交互/R18+事件 (强硬/逆位)
  // ===========================
  {
    id: 'h_dom_wall_slam',
    权重: 35,
    可触发次数: -1,
    标签组: ['性', '强硬'],
    // 增加爱情 > 40，虽然是强硬，但也需要感情基础才不会报警
    触发条件: '当前角色.标签组 存在 "在役" && (当前角色.属性.力量 > 400 || 当前角色.标签组 存在 "热血") && 当前角色.关系.玩家.爱情 > 40',
    标题: '体能的差距',
    正文: '“训练员...你逃不掉的。” {当前角色.名称} 突然将你用力按在了更衣室的墙上。她的手臂如同铁钳一般锁住了你的去路，属于马娘的压倒性力量让你根本无法反抗。她低下头，眼神中带着一丝戏谑和危险的光芒，“只要我想，随时都可以...明白了吗？”',
    选项组: [
      { 显示文本: '因为恐惧而颤抖', 操作指令: '属性变更 毅力 -10; 属性变更 心情 -5; 属性变更 爱欲 10' },
      { 显示文本: '顺从地露出脖颈', 操作指令: '属性变更 爱欲 10; 关系变更 爱情 5; 获得标签 沉重; 跳转 h_dom_bite' }
    ]
  },
  // [链式事件] 壁咚后续 (Release Event)
  {
    id: 'h_dom_bite',
    权重: 0,
    可触发次数: -1,
    标签组: ['性', '强硬'],
    触发条件: 'false',
    标题: '捕食者的印记',
    正文: '看到你放弃抵抗露出脆弱的脖颈，{当前角色.名称} 的瞳孔猛地收缩。她不再忍耐，张口狠狠咬在了你的颈动脉附近。刺痛感伴随着吮吸的快感瞬间传遍全身。“这是我的印记...”她松开嘴，舔舐着留下的红痕，“从现在开始，{训练员.称呼}的身心都是属于我的。”',
    选项组: [
      { 显示文本: '彻底臣服', 操作指令: '属性变更 爱欲 -30; 属性变更 心情 20; 关系变更 爱情 20; 获得标签 变态' },
      { 显示文本: '含泪推开', 操作指令: '属性变更 毅力 -5; 属性变更 爱欲 20' }
    ]
  },

  {
    id: 'h_blackmail_secret',
    权重: 30,
    可触发次数: 1,
    标签组: ['性', '威胁'],
    // 威胁类事件，不需要高爱情，但需要一定认识基础
    触发条件: '当前角色.标签组 存在 "在役" && (当前角色.属性.智慧 > 300 || 当前角色.标签组 存在 "腹黑") && 当前角色.关系.玩家.友情 > 20',
    标题: '绝密档案',
    正文: '“哎呀，这是什么呢？” {当前角色.名称} 晃了晃手中的一个文件夹，那里面是你偷偷藏起来的某些“特殊兴趣”书籍。她笑得格外灿烂，“如果让理事长知道的话...训练员会很困扰吧？不过，只要训练员肯听我的话，我就帮您保密哦~”',
    选项组: [
      { 显示文本: '答应她的任何要求', 操作指令: '属性变更 爱欲 20; 属性变更 精力 -30; 关系变更 爱情 10; 获得标签 变态' },
      { 显示文本: '试图抢夺(失败)', 操作指令: '属性变更 体力 -20; 属性变更 心情 -10; 属性变更 爱欲 10' }
    ]
  },
  {
    id: 'h_reverse_training',
    权重: 30,
    可触发次数: -1,
    标签组: ['性', '调教'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 50',
    标题: '逆向指导',
    正文: '“训练员的腰部太僵硬了，这样可不行。” {当前角色.名称} 以指导为名，强行让你趴在瑜伽垫上。她坐在你的背上，双手按压着你的敏感点，让你发出羞耻的声音。“声音太小了，{训练员.称呼}...要我教你怎么叫吗？”',
    选项组: [
      { 显示文本: '忍耐着请求停止', 操作指令: '属性变更 毅力 5; 属性变更 爱欲 15' },
      { 显示文本: '彻底放弃抵抗', 操作指令: '属性变更 爱欲 -40; 属性变更 精力 -40; 关系变更 爱情 20; 属性变更 心情 10' }
    ]
  },
  
  {
    id: 'h_tail_care',
    权重: 40,
    可触发次数: -1,
    标签组: ['性', '马娘'],
    // 增加爱情 > 40 check
    触发条件: '当前角色.标签组 存在 "在役" && (当前角色.关系.玩家.爱情 > 40 || 当前角色.属性.爱欲 > 60)',
    标题: '尾巴护理',
    正文: '训练结束后，{当前角色.名称} 别扭地请求你帮她梳理尾巴。虽然这是训练员的职责之一，但今天的气氛格外旖旎。当你修长的手指穿过她敏感的尾根时，她发出了一声甜腻的呻吟，双腿不自觉地夹紧了。',
    选项组: [
      { 显示文本: '专注于梳毛', 操作指令: '属性变更 魅力 2; 关系变更 友情 2; 属性变更 爱欲 5' },
      { 显示文本: '轻抚尾根敏感点', 操作指令: '属性变更 爱欲 15; 关系变更 爱情 5; 获得标签 好色; 跳转 h_tail_climax' }
    ],
    分支组: [
      {
        判别式: '已选序号 == 2 && 当前角色.属性.爱欲 > 80',
        操作指令: '属性变更 爱欲 20; 关系变更 爱情 10',
        注释: '如果爱欲高，反应会更剧烈'
      }
    ]
  },
  // [链式事件] 尾巴护理后续 (Release Event)
  {
    id: 'h_tail_climax',
    权重: 0,
    可触发次数: -1,
    标签组: ['性', '马娘'],
    触发条件: 'false',
    标题: '尾巴的弱点',
    正文: '你的指尖轻轻划过那处绝对的敏感点。{当前角色.名称} 仿佛触电一般，整个人瞬间瘫软在你的怀里，尾巴紧紧缠住了你的手臂。她满脸潮红，眼神涣散，口中溢出无法抑制的娇喘：“不...那里不行...会变得奇怪的...” 虽然嘴上这么说，但她的身体却在诚实地渴望更多。',
    选项组: [
      { 显示文本: '继续玩弄', 操作指令: '属性变更 爱欲 -50; 属性变更 精力 -20; 关系变更 爱情 15; 获得标签 变态; 属性变更 心情 20' },
      { 显示文本: '适可而止', 操作指令: '属性变更 爱欲 10; 属性变更 毅力 5' }
    ]
  },

  {
    id: 'h_massage_accident',
    权重: 40,
    可触发次数: -1,
    标签组: ['性', '接触'],
    // 增加爱情 > 25
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.属性.体力 < 40 && 当前角色.关系.玩家.爱情 > 25',
    标题: '深层肌肉放松',
    正文: '{当前角色.名称} 的腿部肌肉过度紧绷，你不得不为她进行深层按摩。随着你的手掌从脚踝逐渐向上推移至大腿内侧，她的呼吸变得急促起来，汗水浸湿了体操服，勾勒出身体的曲线。“训练员...那里...再用力一点...”',
    选项组: [
      { 显示文本: '恪守职业道德', 操作指令: '属性变更 体力 20; 属性变更 爱欲 5; 关系变更 友情 5' },
      { 显示文本: '手指滑向禁区', 操作指令: '属性变更 爱欲 20; 关系变更 爱情 10; 跳转 h_massage_deep' }
    ]
  },
  // [链式事件] 按摩后续 (Release Event)
  {
    id: 'h_massage_deep',
    权重: 0,
    可触发次数: -1,
    标签组: ['性', '接触'],
    触发条件: 'false',
    标题: '越界的指尖',
    正文: '你的手指滑入了那湿热的禁区。{当前角色.名称} 没有推开你，反而猛地夹紧了双腿，将你的手牢牢锁在两腿之间。她弓起腰，发出一声长长的悲鸣，指甲深深嵌入了你的肩膀。“既然做到了这一步...就要负责到底哦，{训练员.称呼}...”',
    选项组: [
      { 显示文本: '就在这里解决', 操作指令: '属性变更 爱欲 -60; 属性变更 精力 -40; 属性变更 心情 20; 关系变更 爱情 30' },
      { 显示文本: '抽出手指', 操作指令: '属性变更 心情 -20; 属性变更 爱欲 10; 获得标签 优柔寡断' }
    ]
  },

  {
    id: 'h_locked_room',
    权重: 20,
    可触发次数: 1,
    标签组: ['性', '意外'],
    // 意外事件，保留随机性
    触发条件: '当前角色.标签组 存在 "在役" && 随机(1~100) > 85',
    标题: '体育仓库的意外',
    正文: '因为门锁故障，你和 {当前角色.名称} 被困在了狭窄闷热的体育仓库里。两人紧贴在一起等待救援。她温热的吐息打在你的脖颈上，柔软的身体随着呼吸起伏摩擦着你的胸膛。',
    选项组: [
      { 显示文本: '保持绅士距离', 操作指令: '属性变更 毅力 10; 属性变更 爱欲 10' },
      { 显示文本: '在黑暗中接吻', 操作指令: '属性变更 爱欲 30; 关系变更 爱情 20; 属性变更 心情 20' }
    ]
  },
  {
    id: 'h_reward_time',
    权重: 25,
    可触发次数: -1,
    标签组: ['性', '主从?'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 60 && 当前角色.属性.心情 > 80',
    标题: '特殊的奖励',
    正文: '比赛获胜后，{当前角色.名称} 把你推到了沙发上。“{训练员.称呼}这么努力，应该得到奖励呢...” 她跨坐在你的腰间，解开了你领口的扣子，眼神迷离而充满占有欲，“今天的奖励...是我哦。”',
    选项组: [
      { 显示文本: '接受奖励', 操作指令: '属性变更 爱欲 -50; 属性变更 精力 -30; 属性变更 心情 20; 关系变更 爱情 15' },
      { 显示文本: '摸摸头就好', 操作指令: '属性变更 爱欲 10; 属性变更 心情 -10; 关系变更 友情 5' }
    ]
  },
  {
    id: 'h_solo_witness',
    权重: 30,
    可触发次数: 1,
    标签组: ['性', '背德'],
    // 偷窥/撞见，属于高爱欲事件，与爱情无关
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.属性.爱欲 > 90',
    标题: '无声的慰藉',
    正文: '你因为遗忘物品返回活动室，却听到里面传来压抑的喘息声。透过门缝，你看到 {当前角色.名称} 正抱着你的外套，脸颊绯红，一只手在裙下快速动作着，嘴里喊着你的名字。',
    选项组: [
      { 显示文本: '悄悄离开', 操作指令: '属性变更 爱欲 10; 获得标签 沉重' },
      { 显示文本: '推门而入', 操作指令: '属性变更 爱欲 -30; 关系变更 爱情 20; 属性变更 心情 10; 获得标签 变态' }
    ]
  },

  // ===========================
  // 旧有擦边事件 (Retained & Refined)
  // ===========================
  {
    id: 'trainer_private_time_1',
    权重: 50,
    可触发次数: -1,
    标签组: ['背德', '性'],
    触发条件: '当前角色.标签组 存在 "训练员" && 当前角色.属性.爱欲 > 40 && 随机(1~100) > 60',
    标题: '私人时间',
    正文: '深夜的训练员办公室。堆积如山的工作压力让你喘不过气，体内的躁动也难以平复。你锁上门，解开衣物，决定稍微“释放”一下压力。正当你沉浸在幻想中即将到达顶峰时，门把手突然转动了，锁芯发出清脆的响声——你忘了，{随机队友} 有备用钥匙。',
    选项组: [
      { 显示文本: '慌乱地整理衣冠', 操作指令: '属性变更 心情 -20; 属性变更 魅力 -10; 获得标签 变态' },
      { 显示文本: '僵在原地', 操作指令: '属性变更 心情 -10; 属性变更 爱欲 10' }
    ],
    分支组: [
      {
        判别式: '已选序号 == 2',
        操作指令: '获得标签 变态; 属性变更 爱欲 20',
        注释: '被看到了'
      }
    ]
  },
  {
    id: 'trainer_private_time_caught',
    权重: 40,
    可触发次数: -1,
    标签组: ['修罗场', '性'],
    触发条件: '当前角色.标签组 存在 "训练员" && 当前角色.标签组 存在 "变态"',
    标题: '无法解释的误会',
    正文: '自从那天被撞见后，{随机队友} 看你的眼神就变得不对劲了。今天在指导姿势时，你的手无意中碰到了她的腰，她身体猛地一颤，满脸通红地小声问道：“{训练员.称呼}...如果是你的话...也不是不可以...”',
    选项组: [
      { 显示文本: '装作没听见', 操作指令: '属性变更 爱欲 5; 属性变更 心情 -5' },
      { 显示文本: '更加严格地指导', 操作指令: '属性变更 毅力 5; 属性变更 爱欲 10' }
    ]
  },
  {
    id: 'uma_heat',
    权重: 30,
    可触发次数: -1,
    标签组: ['爱欲', '马娘'],
    // 只有关系到位或者爱欲极高才会触发
    触发条件: '当前角色.标签组 存在 "在役" && (当前角色.属性.爱欲 > 80 || 当前角色.关系.玩家.爱情 > 50)',
    标题: '躁动的季节',
    正文: '{当前角色.名称} 今天显得格外粘人，训练间隙总是若有若无地用身体蹭着你的手臂。空气中弥漫着一股说不清的甜腻气味。“{训练员.称呼}...我的心跳好快...你能帮我确认一下吗？”她抓着你的手按向胸口。',
    选项组: [
      { 显示文本: '义正言辞地拒绝', 操作指令: '属性变更 毅力 5; 属性变更 爱欲 -10; 属性变更 心情 -10' },
      { 显示文本: '顺势而为', 操作指令: '属性变更 爱欲 20; 属性变更 精力 -20; 获得标签 沉重; 关系变更 爱情 10' }
    ]
  },

  // ===========================
  // 无选项日常/怪文书事件 (Narrative)
  // ===========================
  {
    id: 'narrative_morning_greeting',
    权重: 50,
    可触发次数: -1,
    标签组: ['日常', '糖'],
    触发条件: '当前角色.标签组 存在 "在役"',
    正文: '清晨，{当前角色.名称} 在校门口遇到了你。她露出了极其灿烂的笑容，仿佛整个世界都亮了起来。“{训练员.称呼}！早上好！” 周围的空气似乎都变得甜蜜了。',
    操作指令: '属性变更 心情 5; 属性变更 爱欲 1; 关系变更 友情 2'
  },
  {
    id: 'narrative_shared_drink',
    权重: 40,
    可触发次数: -1,
    标签组: ['暧昧'],
    // 增加爱情 > 15
    触发条件: '当前角色.标签组 存在 "在役" && 随机(1~100) > 60 && 当前角色.关系.玩家.爱情 > 15',
    正文: '休息时，{当前角色.名称} 极其自然地拿起了你的水壶喝了一口，然后才装作刚发现的样子：“哎呀，拿错了...不过没关系吧？” 她耳根有点红。',
    操作指令: '属性变更 爱欲 3; 关系变更 爱情 2'
  },
  {
    id: 'narrative_laundry_mystery',
    权重: 30,
    可触发次数: -1,
    标签组: ['怪文书', '微恐怖'],
    触发条件: '当前角色.标签组 存在 "在役" && 随机(1~100) > 80',
    正文: '你在寻找昨天换下来的衬衫，最后竟然在 {当前角色.名称} 的运动包一角发现了它。被发现时，她慌乱地解释说是洗衣服时混进去了...但为什么已经洗干净并叠得整整齐齐的呢？',
    操作指令: '属性变更 心情 -2; 属性变更 爱欲 5; 关系变更 爱情 5'
  },
  {
    id: 'narrative_sleep_mumble',
    权重: 35,
    可触发次数: -1,
    标签组: ['暧昧'],
    // 增加爱情 > 20
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.关系.玩家.爱情 > 20',
    正文: '{当前角色.名称} 在活动室的沙发上睡着了。你经过时，听到她模糊的梦话：“{训练员.称呼}...嘿嘿...那里不可以...” 你决定假装什么都没听见，但心跳不由得加快了。',
    操作指令: '属性变更 爱欲 2; 关系变更 爱情 1'
  },
  {
    id: 'narrative_rainy_day',
    权重: 40,
    可触发次数: -1,
    标签组: ['暧昧', '日常'],
    触发条件: '随机(1~100) < 20',
    正文: '突降暴雨。你和 {当前角色.名称} 既然只带了一把伞，只能共用一把。她的肩膀紧紧贴着你，你能感受到透过湿润布料传来的体温。她似乎并不讨厌这场雨。',
    操作指令: '属性变更 心情 3; 属性变更 爱欲 2; 关系变更 爱情 3'
  },
  {
    id: 'narrative_trash_sorting',
    权重: 25,
    可触发次数: -1,
    标签组: ['沉重', '怪文书'],
    触发条件: '当前角色.标签组 存在 "在役" && 随机(1~100) > 90',
    正文: '你发现办公室垃圾桶里的空咖啡罐不见了。转身看到 {当前角色.名称} 正在仔细地将它们作为收藏品陈列在她的储物柜深处。“这是{训练员.称呼}努力过的证明...”她喃喃自语。 (获得标签: 沉重)',
    操作指令: '获得标签 沉重; 属性变更 爱欲 10; 关系变更 爱情 10'
  },
  {
    id: 'narrative_late_work',
    权重: 45,
    可触发次数: -1,
    标签组: ['工作'],
    触发条件: '当前角色.标签组 存在 "训练员"',
    正文: '为了制定新的训练计划，你不得不加班到深夜。窗外的特雷森学园静悄悄的。虽然辛苦，但为了那孩子的笑容，一切都是值得的。 (学识微量上升)',
    操作指令: '属性变更 学识 1; 属性变更 体力 -10; 属性变更 精力 -10'
  },
  {
    id: 'narrative_good_condition',
    权重: 40,
    可触发次数: -1,
    标签组: ['训练'],
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.属性.心情 > 70',
    正文: '{当前角色.名称} 今天状态绝佳！跑步姿势轻盈得像一阵风。她回头看向你，比了一个“V”字手势。',
    操作指令: '属性变更 速度 5; 属性变更 耐力 5; 属性变更 力量 5; 属性变更 毅力 5; 属性变更 智慧 5; 关系变更 友情 2'
  },
  {
    id: 'narrative_bad_dream',
    权重: 20,
    可触发次数: -1,
    标签组: ['噩梦'],
    触发条件: '当前角色.标签组 存在 "在役"',
    正文: '{当前角色.名称} 顶着黑眼圈来到了训练场。似乎是做了一个你辞职离开的噩梦，即使你再三保证不会离开，她还是紧紧抓着你的衣角不放了一整天。',
    操作指令: '属性变更 精力 -15; 属性变更 心情 -10; 关系变更 爱情 3'
  },
  {
    id: 'narrative_diary',
    权重: 25,
    可触发次数: -1,
    标签组: ['怪文书', '沉重'],
    触发条件: '当前角色.标签组 存在 "在役"',
    正文: '你无意中看到 {当前角色.名称} 正在写日记。每一页上都密密麻麻写满了关于你的观察记录：“8:03 喝了咖啡”、“10:15 打了个喷嚏”、“12:30 和绿色恶魔说了两句话（记仇）”...',
    操作指令: '获得标签 沉重; 属性变更 爱欲 5; 关系变更 爱情 5'
  },
  {
    id: 'narrative_plushie',
    权重: 20,
    可触发次数: -1,
    标签组: ['怪文书', '手作'],
    触发条件: '当前角色.标签组 存在 "在役"',
    正文: '{当前角色.名称} 包上挂着一个新的玩偶，仔细一看，那个玩偶的穿着打扮和你一模一样，甚至连眼镜的款式都还原了。“这是我自己做的哦。”她骄傲地展示着。',
    操作指令: '属性变更 爱欲 5; 关系变更 爱情 3'
  },
  
  // ===========================
  // 有选项系统/通用事件
  // ===========================
  {
    id: 'daily_training',
    权重: 50,
    可触发次数: -1,
    标签组: ['训练'],
    触发条件: '当前角色.标签组 存在 "在役"',
    标题: '日常训练',
    正文: '{当前角色.名称} 进行了日常的基础体能训练。挥洒汗水是青春的证明！',
    选项组: [
      { 显示文本: '侧重速度训练', 操作指令: '属性变更 速度 15; 属性变更 体力 -15; 关系变更 友情 1' },
      { 显示文本: '侧重力量训练', 操作指令: '属性变更 力量 15; 属性变更 体力 -15; 关系变更 友情 1' },
      { 显示文本: '休息一会', 操作指令: '属性变更 体力 20; 属性变更 精力 10; 属性变更 心情 5; 关系变更 友情 1' }
    ]
  },
  {
    id: 'trainer_strategy',
    权重: 40,
    可触发次数: -1,
    标签组: ['工作'],
    触发条件: '当前角色.标签组 存在 "训练员"',
    标题: '制定计划',
    正文: '作为训练员，你需要为担当马娘制定接下来的训练方针。你的目光不自觉地停留在了她的照片上。',
    选项组: [
      { 显示文本: '研究比赛录像', 操作指令: '属性变更 学识 1; 属性变更 精力 -10' },
      { 显示文本: '思考两人的未来', 操作指令: '属性变更 爱欲 2; 属性变更 心情 5' }
    ]
  },
  {
    id: 'trainer_choice_example',
    权重: 50,
    可触发次数: -1,
    标签组: ['日常'],
    触发条件: '当前角色.标签组 存在 "训练员"',
    标题: '工作态度',
    正文: '今天的工作堆积如山，作为训练员你打算？',
    选项组: [
      { 显示文本: '认真完成', 操作指令: '属性变更 学识 1; 属性变更 精力 -15' },
      { 显示文本: '摸鱼睡觉', 操作指令: '属性变更 心情 5; 属性变更 体力 10' }
    ],
    分支组: [
      {
        判别式: '已选序号 == 2 && 随机(1~100) > 50',
        操作指令: '获得标签 懒惰',
        注释: '摸鱼有概率变懒'
      }
    ]
  },
  {
    id: 'gym_fat_burn',
    权重: 50,
    可触发次数: -1,
    标签组: ['训练', '减肥'],
    触发条件: '当前角色.标签组 存在 "肥胖"',
    标题: '减肥特训',
    正文: '由于最近摄入过多，{当前角色.名称} 的各项指标开始出现警报。绿色恶魔建议进行强制减肥特训。',
    选项组: [
      { 显示文本: '地狱游泳一小时', 操作指令: '属性变更 耐力 10; 属性变更 毅力 10; 移除标签 肥胖; 属性变更 心情 -15; 属性变更 体力 -30; 关系变更 友情 2' },
      { 显示文本: '再吃一顿就减肥', 操作指令: '属性变更 体质 1; 属性变更 速度 -5' }
    ]
  },
  
  // --- 怪文书/情感事件 (有选项) ---
  {
    id: 'gw_midnight_call',
    权重: 30,
    可触发次数: -1,
    标签组: ['怪文书', '深夜'],
    // 增加爱情 > 30
    触发条件: '当前角色.标签组 存在 "在役" && 当前角色.属性.心情 > 50 && 当前角色.关系.玩家.爱情 > 30',
    标题: '深夜来电',
    正文: '凌晨两点，训练员的手机突然响了。电话那头传来了{当前角色.名称}略带醉意（也许是果汁？）的声音：“{训练员.称呼}...你睡了吗？我睡不着...能不能...听我说话？”',
    选项组: [
      { 显示文本: '陪她聊通宵', 操作指令: '属性变更 爱欲 5; 属性变更 精力 -20; 属性变更 心情 5; 关系变更 爱情 3' },
      { 显示文本: '催她快去睡觉', 操作指令: '属性变更 毅力 2; 属性变更 心情 -5' }
    ]
  },
  {
    id: 'gw_silent_gaze',
    权重: 35,
    可触发次数: -1,
    标签组: ['怪文书', '视线'],
    触发条件: '当前角色.标签组 存在 "在役"',
    标题: '无言的视线',
    正文: '在指导其他马娘动作时，你总感觉背后有一道灼热的视线。回头一看，{当前角色.名称}正站在角落里，眼神晦暗不明地盯着这边。',
    选项组: [
      { 显示文本: '向她微笑', 操作指令: '属性变更 魅力 1; 属性变更 心情 2; 关系变更 友情 2' },
      { 显示文本: '假装没看见', 操作指令: '属性变更 心情 -5; 获得标签 沉重; 属性变更 爱欲 5; 关系变更 爱情 3' }
    ]
  },
  {
    id: 'gw_heavy_bento',
    权重: 25,
    可触发次数: -1,
    标签组: ['怪文书', '料理'],
    触发条件: '当前角色.标签组 存在 "在役" && 随机(1~100) > 50',
    标题: '便当的重量',
    正文: '“这是我亲手做的便当，{训练员.称呼}一定会全部吃完的...对吧？”{当前角色.名称}微笑着递过来一个巨大的饭盒，里面的配菜摆成了“LOVE”的形状。份量大概是正常人的三倍。',
    选项组: [
      { 显示文本: '拼死吃完', 操作指令: '属性变更 体质 1; 属性变更 速度 -2; 属性变更 心情 5; 属性变更 体力 10; 关系变更 爱情 5' },
      { 显示文本: '分给同事吃', 操作指令: '属性变更 魅力 -2; 属性变更 心情 -10; 获得标签 沉重; 关系变更 爱情 2' }
    ]
  },
  {
    id: 'gw_rumors',
    权重: 20,
    可触发次数: 3,
    标签组: ['八卦'],
    触发条件: '当前角色.标签组 存在 "在役"',
    标题: '学园传闻',
    正文: '最近学园里的布告栏上出现了一些奇怪的匿名贴：“某位训练员和担当马娘在活动室待到很晚...” 大家都在窃窃私语。',
    选项组: [
      { 显示文本: '身正不怕影子斜', 操作指令: '属性变更 毅力 5' },
      { 显示文本: '暗自窃喜', 操作指令: '属性变更 心情 5; 属性变更 爱欲 2' }
    ]
  },
  {
    id: 'gw_exclusive_right',
    权重: 15,
    可触发次数: -1,
    标签组: ['沉重', '怪文书'],
    触发条件: '当前角色.标签组 存在 "沉重" || 当前角色.标签组 存在 "马娘"',
    标题: '独占欲',
    正文: '{当前角色.名称} 突然紧紧抓住了你的衣袖，力道大得惊人。“{训练员.称呼}...这个周末，只属于我一个人，好吗？哪里都不许去...”',
    选项组: [
      { 显示文本: '答应她', 操作指令: '属性变更 心情 10; 属性变更 精力 -10; 属性变更 爱欲 10; 关系变更 爱情 10' },
      { 显示文本: '婉拒', 操作指令: '属性变更 心情 -20; 属性变更 爱欲 5' }
    ]
  },

  // --- 特定事件 ---
  {
    id: 'nature_sigh',
    权重: 80,
    可触发次数: -1,
    标签组: ['个人剧情'],
    触发条件: '当前角色.标签组 存在 "配角" && 随机(1~100) >= 60',
    标题: '配角的叹息',
    正文: '{当前角色.名称} 看着杂志上的封面明星，轻轻叹了口气。“反正我也只是衬托鲜花的绿叶罢了...像我这样普通的女孩，{训练员.称呼}是不是早就厌倦了？”',
    选项组: [
      { 显示文本: '你就是我的主角', 操作指令: '属性变更 心情 10; 属性变更 毅力 5; 属性变更 爱欲 5; 关系变更 爱情 5' },
      { 显示文本: '默默摸头', 操作指令: '属性变更 心情 5; 关系变更 友情 3' }
    ]
  },
  {
    id: 'restaurant_closed',
    权重: 100,
    可触发次数: 1, // 唯一事件
    标签组: ['负面', '饮食'],
    触发条件: '当前角色.标签组 存在 "大胃王"',
    标题: '餐馆谢客',
    正文: '附近所有自助餐厅都对 {当前角色.名称} 关闭了！老板们挂出了“{当前角色.名称}与狗不得入内”的牌子。',
    操作指令: '属性变更 心情 -10',
    选项组: [
      { 显示文本: '太悲伤了...', 操作指令: '' }
    ]
  },
  {
    id: 'random_fortune',
    权重: 20,
    可触发次数: -1,
    标签组: ['幸运'],
    触发条件: '随机(1~100) > 80',
    正文: '{当前角色.名称} 在路边捡到了500元！“这难道是...我和{训练员.称呼}的结婚基金？”',
    选项组: [
      { 显示文本: '想太多了', 操作指令: '属性变更 财富 1; 属性变更 心情 3' }
    ]
  },
  {
    id: 'study_hard',
    权重: 30,
    可触发次数: -1,
    标签组: ['学习'],
    触发条件: '当前角色.属性.智慧 < 300 && 当前角色.标签组 存在 "马娘"',
    正文: '{当前角色.名称} 觉得自己最近在比赛中总是判断失误，决定恶补一下战术理论。',
    选项组: [
      { 显示文本: '通宵学习', 操作指令: '属性变更 智慧 20; 属性变更 精力 -30; 获得标签 擅长训练' }
    ]
  },

  // --- 随机事件 ---
  {
    id: 'late_night_snack',
    权重: 25,
    可触发次数: -1,
    标签组: ['饮食'],
    触发条件: '当前角色.属性.体力 > 20 && 随机(1~100) < 30',
    标题: '深夜诱惑',
    正文: '训练结束后，{当前角色.名称} 看着眼前的草莓大福陷入了沉思。这是热量的陷阱，还是心灵的抚慰？',
    选项组: [
      { 显示文本: '吃了它！', 操作指令: '属性变更 心情 5; 属性变更 体力 10' },
      { 显示文本: '绝不向糖分屈服', 操作指令: '属性变更 毅力 5; 属性变更 心情 -5' }
    ],
    分支组: [
      {
        判别式: '已选序号 == 1 && 随机(1~100) > 70',
        操作指令: '获得标签 肥胖',
        注释: '如果选了1且运气不好，就会变胖'
      }
    ]
  },
  {
    id: 'lost_item',
    权重: 15,
    可触发次数: -1,
    标签组: ['负面'],
    触发条件: '当前角色.标签组 存在 "倒霉" || 随机(1~100) < 10',
    标题: '丢失物品',
    正文: '{当前角色.名称} 找不到了钱包，明明刚才还在的！',
    选项组: [
      { 显示文本: '去失物招领处看看', 操作指令: '属性变更 心情 -5' },
      { 显示文本: '肯定是掉路上了', 操作指令: '属性变更 财富 -2; 属性变更 心情 -10' }
    ]
  },
  {
    id: 'karaoke',
    权重: 25,
    可触发次数: -1,
    标签组: ['娱乐'],
    触发条件: '当前角色.属性.财富 > 5 && 随机(1~100) < 25',
    标题: '卡拉OK',
    正文: '被朋友邀请去卡拉OK唱歌。',
    选项组: [
      { 显示文本: '大展歌喉', 操作指令: '属性变更 魅力 1; 属性变更 心情 10; 属性变更 财富 -1; 属性变更 精力 -10; 关系变更 友情 3' },
      { 显示文本: '婉拒', 操作指令: '属性变更 心情 -2' }
    ]
  },
  
  // --- 角色专属 ---
  {
    id: 'nature_shopping',
    权重: 60,
    可触发次数: -1,
    标签组: ['个人剧情', '约会'],
    // 依赖关系值
    触发条件: '当前角色.模板ID == "nice_nature" && (当前角色.关系.玩家.爱情 > 20 || 当前角色.属性.心情 > 80)',
    标题: '商店街购物',
    正文: '难得心情不错，{当前角色.名称} 邀请训练员去商店街逛逛。“就当是...约会练习？”她小声说道。',
    选项组: [
      { 显示文本: '牵起她的手', 操作指令: '属性变更 爱欲 5; 属性变更 心情 5; 关系变更 爱情 5' },
      { 显示文本: '只是逛街而已', 操作指令: '属性变更 毅力 2; 属性变更 心情 -5' }
    ]
  },
  {
    id: 'teio_step',
    权重: 60,
    可触发次数: -1,
    标签组: ['个人剧情'],
    触发条件: '当前角色.模板ID == "tokai_teio"',
    标题: '帝王舞步',
    正文: '{当前角色.名称} 哼着歌，迈着独特的轻盈步伐走在走廊上。“这就是帝王的舞步~ {训练员.称呼}，看着我，只看着我一个人！”',
    选项组: [
      { 显示文本: '夸奖她', 操作指令: '属性变更 速度 5; 属性变更 心情 5; 属性变更 爱欲 2; 关系变更 爱情 2' },
      { 显示文本: '提醒她注意脚下', 操作指令: '属性变更 智慧 2' }
    ]
  },
    {
    id: 'teio_hachimi',
    权重: 60,
    可触发次数: 1,
    标签组: ['个人剧情'],
    触发条件: '当前角色.模板ID == "tokai_teio"',
    标题: '哈基米',
    正文: '不知为何，网络上忽然开始风靡 {当前角色.名称} 随口哼的蜂蜜水之歌。',
        选项组: [
      { 显示文本: '向盗摄者发送律师函', 操作指令: '关系变更 友情 5' },
      { 显示文本: '趁机打造饮料品牌', 操作指令: '获得标签 富豪' }
    ]
  },
  {
    id: 'mayano_flight',
    权重: 60,
    可触发次数: -1,
    标签组: ['个人剧情'],
    触发条件: '当前角色.模板ID == "mayano_top_gun"',
    标题: 'I Copy!',
    正文: '{当前角色.名称} 正在模仿飞行员的动作。“You copy? I copy! 起飞！目标是{训练员.兄姐}的怀抱！”',
    选项组: [
      { 显示文本: '接住她', 操作指令: '属性变更 爱欲 5; 属性变更 速度 2; 关系变更 爱情 3' },
      { 显示文本: '闪开', 操作指令: '属性变更 心情 -10' }
    ]
  }
];